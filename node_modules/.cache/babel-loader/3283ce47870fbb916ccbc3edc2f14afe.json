{"ast":null,"code":"import axios from \"axios\";\nexport const uploadPhoto = async (user, image, ref) => {\n  if (image.size > 264000) {\n    ref.value = null;\n    throw \"File is too large\";\n  }\n\n  console.log(image);\n\n  try {\n    const nameSplit = image.name.split('.');\n    const fileExtension = image.name.split('.')[nameSplit.length - 1];\n    nameSplit.pop();\n    const fileName = nameSplit.join('.');\n    console.log(fileName, fileExtension);\n    const file = {\n      name: fileName,\n      extension: fileExtension,\n      size: image.size,\n      type: image.type\n    };\n    const {\n      data: uploadConfig\n    } = await axios.post('http://localhost:4000/v1/aws/', {\n      user,\n      file\n    });\n    const data = await axios.put(uploadConfig.url, image, {\n      headers: {\n        'Content-Type': file.type\n      }\n    });\n    return {\n      url: `https://review-website-dev.s3.eu-west-1.amazonaws.com/${uploadConfig.key}`\n    };\n  } catch (err) {\n    console.log(err.response);\n  }\n};","map":{"version":3,"sources":["D:/Projects/BrandReview/src/helpers/uploadPhoto.js"],"names":["axios","uploadPhoto","user","image","ref","size","value","console","log","nameSplit","name","split","fileExtension","length","pop","fileName","join","file","extension","type","data","uploadConfig","post","put","url","headers","key","err","response"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAIA,OAAO,MAAMC,WAAW,GAAG,OAAMC,IAAN,EAAYC,KAAZ,EAAmBC,GAAnB,KAA0B;AACjD,MAAGD,KAAK,CAACE,IAAN,GAAa,MAAhB,EAAuB;AACnBD,IAAAA,GAAG,CAACE,KAAJ,GAAY,IAAZ;AACA,UAAM,mBAAN;AACH;;AACDC,EAAAA,OAAO,CAACC,GAAR,CAAYL,KAAZ;;AACA,MAAG;AACC,UAAMM,SAAS,GAAGN,KAAK,CAACO,IAAN,CAAWC,KAAX,CAAiB,GAAjB,CAAlB;AAIJ,UAAMC,aAAa,GAAGT,KAAK,CAACO,IAAN,CAAWC,KAAX,CAAiB,GAAjB,EAAsBF,SAAS,CAACI,MAAV,GAAmB,CAAzC,CAAtB;AACAJ,IAAAA,SAAS,CAACK,GAAV;AACA,UAAMC,QAAQ,GAAGN,SAAS,CAACO,IAAV,CAAe,GAAf,CAAjB;AACAT,IAAAA,OAAO,CAACC,GAAR,CAAYO,QAAZ,EAAsBH,aAAtB;AAEA,UAAMK,IAAI,GAAG;AACTP,MAAAA,IAAI,EAAEK,QADG;AAETG,MAAAA,SAAS,EAAEN,aAFF;AAGTP,MAAAA,IAAI,EAAEF,KAAK,CAACE,IAHH;AAITc,MAAAA,IAAI,EAAEhB,KAAK,CAACgB;AAJH,KAAb;AAOA,UAAM;AAACC,MAAAA,IAAI,EAAEC;AAAP,QAAuB,MAAMrB,KAAK,CAACsB,IAAN,CAAW,+BAAX,EAA2C;AAACpB,MAAAA,IAAD;AAAOe,MAAAA;AAAP,KAA3C,CAAnC;AACA,UAAMG,IAAI,GAAG,MAAMpB,KAAK,CAACuB,GAAN,CAAUF,YAAY,CAACG,GAAvB,EAA4BrB,KAA5B,EAAmC;AAClDsB,MAAAA,OAAO,EAAC;AACN,wBAAiBR,IAAI,CAACE;AADhB;AAD0C,KAAnC,CAAnB;AAKA,WAAO;AAACK,MAAAA,GAAG,EAAG,yDAAwDH,YAAY,CAACK,GAAI;AAAhF,KAAP;AACC,GAxBD,CAyBA,OAAMC,GAAN,EAAU;AACNpB,IAAAA,OAAO,CAACC,GAAR,CAAYmB,GAAG,CAACC,QAAhB;AACH;AACJ,CAlCM","sourcesContent":["import axios from \"axios\"\r\n\r\n\r\n\r\nexport const uploadPhoto = async(user, image, ref) =>{\r\n    if(image.size > 264000){\r\n        ref.value = null\r\n        throw \"File is too large\"\r\n    }\r\n    console.log(image)\r\n    try{\r\n        const nameSplit = image.name.split('.')\r\n\r\n    \r\n\r\n    const fileExtension = image.name.split('.')[nameSplit.length - 1]\r\n    nameSplit.pop()\r\n    const fileName = nameSplit.join('.')\r\n    console.log(fileName, fileExtension)\r\n\r\n    const file = {\r\n        name: fileName,\r\n        extension: fileExtension,\r\n        size: image.size,\r\n        type: image.type\r\n    }\r\n\r\n    const {data: uploadConfig} = await axios.post('http://localhost:4000/v1/aws/',{user, file})\r\n    const data = await axios.put(uploadConfig.url, image, {\r\n        headers:{\r\n          'Content-Type' : file.type\r\n        }\r\n    })\r\n    return {url: `https://review-website-dev.s3.eu-west-1.amazonaws.com/${uploadConfig.key}`}\r\n    }\r\n    catch(err){\r\n        console.log(err.response)\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}